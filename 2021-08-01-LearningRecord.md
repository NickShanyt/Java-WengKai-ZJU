# 2021/08/01

# 第6周 控制反转与MVC模式

## 1、控制反转

比如在前端中，我们有一个按钮，我们希望鼠标点击这个按钮时，程序会触发一下我们事件，达到我们的目的。那么怎么做的呢？

- **方法一**:一种自然的想法是直接在这个按钮的类中写好这个时间的代码，
  - **缺点**：然而这样做的缺点是如果以后想更改或移除点击这个按钮 所除法的事件，就需要到这个按钮类中来修改代码，代码的可扩展性很差。
- **方法二**：在按钮类中 写一个点击按钮 触发事件的**接口**A，然后去写一个需要被触发的事件A的类，然后在事件A的类中重写接口A（写自己想要执行的代码)，然后将这个事件A的类的对象 **注册**给 按钮类的接口A。这样一来，点击按钮以后程序就会来执行事件A中的接口A的代码





### 内部类

- 定义在别的类 的内部、函数内部 的累
- 内部类能够直接访问外部的全部资源
  - 全部资源包括 任何私有的成员
  - **外部是函数时，只能访问那个函数里 final的变量**
    - 外部时函数时，内部类可以访问该函数所在类的全部资源，**但是只能访问那个函数里final的变量**

内部类就是指一个类定义在另一个类的内部，从而成为外部类的一个成员。

因此一个类中可以有成员变量、方法，还可以有内部类。

实际上Java的内部类可以被称为成员类，内部类实际上是它所在类的成员。

所以内部类也就具有和成员变量、成员方法相同的性质。

比如，成员方法可以访问私有变量，那么成员类也可以访问私有变量了。

也就是说，**成员类中的成员方法都可以访问成员类所在类的私有变量。**

**内部类最重要的特点就是能够访问外部类的所有成员。**





### **匿名类**

- 在new对象的时候给出类的定义形成了匿名类
- 匿名类可以继承某类，也可以实现某接口
- Swing 的消息机制广泛使用匿名类
- 匿名类一定是一个内部类

```java
JButton btnStep = new JButton("运行一步");
//addActionListener是类JButton中的一个接口

btnStep.addActionListener(new ActionListener()
           {
                @Override
                public void actionPerformed(ActionEvent e){
                    System.our.println("执行了");
                }
                                  
                          })
```

在上述代码中，`btnStep.addActionListener() `的参数部分为：

```java
new ActionListener()
           {
                @Override
                public void actionPerformed(ActionEvent e){
                    System.our.println("执行了");
                }

			}
```

这是一个**匿名类**，方法`btnStep.addActionListener()`的参数需要是一个重写ActionListener接口（该接口为`JButton`类的接口）的对象，而此处匿名类**直接在new对象的时候给出类的定义**

​                                  

### 注入反转

- 由按钮公布一个收听者接口和一对 注册/注销函数
- 你的代码实现那个接口，将收听者对象注册到按钮上
- 一旦按钮被按下，就会反过来调用你的收听者对象的某个函数





---

## 2、MVC设计模式



**JTable**

- 用JTable类可以以表格的形式显示和编辑数据，但是JTable类的对象并不存储数据，它只是数据的表现。

- 数据与表现分离，JTable实现了分离

### MVC

- 数据、表现、控制    三者分离，各负其责
  - **M = Model 模型**
    - 保存和维护数据，提供接口让外部修改数据，通知表现需要刷新
  - **V = View 表现**
    - 从模型获得数据，根据数据画出表现
  - **C = Control 控制**
    - 从用户得到输入，根据输入调整数据





C 不直接和V 交互，而是通过M

用户在界面上做的任何操作，不直接去修改界面上的显示

而是用户的输入，用来调整内部的数据，内部的数据又促使其修改表现

注：在Swing中，V 和 C是一体的，
