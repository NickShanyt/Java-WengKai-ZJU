## 2021/07/28

---

## 对象和类

**类**——定义了规范

**对象**——类的一个实体

- 对象 = 属性 +服务
  - 数据：属性 或 状态
  - 操作：函数
- **封装**：把数据和对数据的操作放在一起



### 1、定义类

```java
public class VendingMachine{
    int price;
    int balance;
    int amount;
    
    void showPrompt
    {
        ...
    }
    void showBalance
    {
        ...
    }
    
}
```



创建一个类的实体（实例），即创建一个对象：

```java
new VendingMachine(); //用new运算符创建一个这个类的对象
VendingMachine v = new VendingMachine();
```

- 对象变量  是 对象的管理者

### 2、成员变量

- 类定义了对象中所具有的变量，这些变量称作**成员变量**
- **每个对象有自己的变量**，和用一个类的其他对象是分开的

**成员变量的生存期是对象的生存期，作用域是类内部的成员函数**

- Java有自动垃圾回收机制，不用担心何时释放



与**本地变量**区分

- **本地变量：**
  - 定义再函数内部的变量
  - 本地变量的**生存期**和**作用域**都是函数内部

#### 函数与成员变量

- 在函数中可以**直接写成员变量的名字**来访问成员变量
- 而函数是通过**对象**来调用的，如`v.showPrompt()`
  - 这次调用**临时建立**了`showPrompt()`和对象v之间的关系，让`showPrompt()`内部的成员变量指的是v的成员变量

#### this

- 成员函数的一个特殊的固有的**本地变量**，它表达了调用这个函数的那个对象

### 3、对象初始化

- 成员变量如果在类中没有被初始化值，则会被自动初始化为0值
  - 0值根据成员变量的类型不同，具有不同的含义

#### 构造函数

​		如果有一个**成员函数**的名字和类的名字完全相同，则在创建这个类的每一个对象的时候会自动调用这个函数 -> 构造函数

-  构造函数没有返回类型
-  构造函数也可以接受参数，但是需要在创建对象时传入参数

#### 函数重载

- 一个类可以有多个构造函数，只要它们的参数表不同

- 创建对象的时候给出不同的参数值，就会自动调用不同的构造函数

- 通过`this()`还可以调用其他构造函数

  - ```java
    VendingMachine()
    	{
    		total=0;
    	}
    	
    	//构造函数可以接受参数,但在创建对象时，也要传入参数
    	VendingMachine(int price) //重载
    	{
            this();
            //this()该用法是调用没有参数的构造函数
            //this()必须在第一行，且只能调用一次
    		this.price=price;
    	}
    ```

  - 

- 一个类里的同名但参数表不同的函数构成了**重载关系**

---

## 对象交互

一个类中，其**成员变量**可以是其他类的对象

一个对象中可以有其他对象

### 1、封装

- 封装，就是把数据和对这些数据的操作放在一起，并**且用这些操作把数据掩盖起来，**是面向对象的基本概念之一，也是最核心的概念。



如何保证类在设计的时候做到封装？

- 1、所有的成员变量必须是 private的
  - 可以避免别人任何使用你的内部数据
- 2、所有public的函数，只是用来实现这个类的对象，或类自己要提供的服务的。**而不是用来直接访问数据的。**
  - 除非对数据的访问，就是这个类及对象的服务
  - 给每个成员变量提供一对 用于读写的 get/set 函数是不合适的设计



#### private

- 只有这个**类内部**可以访问
  - **类内部** 指类的成员函数和定义初始化
  - **这个限制是对类，而不是对 对象**

**即：同一个类的不同对象之间，可以互相访问对方的私有变量**



#### public

- 任何人都可以访问，在类外也可以访问
- 如果一个成员中，没有加 public ，称之为 **“friendly”**
  - **与该成员位于同一个包Package的其他类可以访问**



类的定义中，也会使用public

一个类是public的，表明任何人都是使用该类来创建对象

**如果类是public的，则要求：**

- 其源代码文件名，必须就是类名
  - 即，public class Clock{} 这个类所在的.java文件的名字必须是Clock

```java
public class Clock{
    
}
```

**编译单元**

- 一个 .java文件称为一个编译单元，每次对一个编译单元进行编译
- 当一个编译单元中有多个类时，只有一个类可以是public的
- 一个类前面没有 public，则该类只能在同一个包Package中起作用

​		



### 2、包Package

**定义：**

​	包就是Java的类库管理机制，它借助文件系统的目录来管理类库，一个包就是一个目录，一个包内的所有的类必须放在一个目录下，那个目录的名字必须是包的名字。

#### import

​	当需要使用的其他类，与调用该类的代码不在同一个包Package中时，需要使用 `import`来导入包

如：导入 **包display**中的**Display类**：

```java
import display.Display; //导入 包display 中的 Display类
import display.* //导入 包display中的所有类
```

**包中，还可以再有包**

- 在创建一个新的包Package时，如果包的名字中还有 . 则，表明在该包的下一级再创建一个包。如：`display.ds` 则是在包display下再创建一个名为ds的包



### 3、类变量

类是描述，对象是实体。在类里所描述的成员变量，是位于这个类的每一个对象中的。

而如果某个**成员**有**static关键字做修饰**，它就**不再属于每一个对象**，**而是属于整个类的了。**

通过每个对象都可以访问到这些类变量和类函数，但是也可以通过类的名字来访问它们。**类函数由于不属于任何对象**，因此也没有办法建立与调用它们的对象的关系，就不能访问任何非static的成员变量和成员函数了。



#### static

​	如果一个对象修改了类中的某个 static对象，则其他对象中的 该static对象也被更改了



实际上，增加了 static 关键字的成员变量，直接成为**类**的变量，而不是对象的变量

- **类变量** 其不属于任何一个对象，而属于这个类
- 因此该类的每个对象都拥有这个变量，但是只有1个



**函数前面的 static 表明这个函数不属于任何对象，而属于这个类**

总结：

- 加了static关键字的 **成员变量** 和 **成员函数** 是属于这个类，而不属于任何一个该类的对象

  （1）类变量属于类，可以共享，属于公共属性；实例变量属于某个对象个体；

  （2）加上static 为类变量或者静态变量，否则为实例变量；
