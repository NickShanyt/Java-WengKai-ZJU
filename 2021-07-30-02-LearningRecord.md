# 2021/07/30-02

## 第5周 设计原则

### 消除代码重复

#### 函数

- 将一些需要重用的代码段，封装成函数

#### 父类





评价**类的设计**的好坏：耦合 聚合





#### 增加可扩展性

类和类之间的关系称作“**耦合**”

- 比如Game类中大量使用了Room类的成员变量
- 耦合 越低越好，保持距离是形成良好代码的关键
- 

- 1、**用封装来降低耦合**
  - 减少类之间的直接感知
  - 比如在示例中，room要干的活直接在room类中定义好，game需要使用时，直接调用game的方法。**减少game直接使用room的成员变量，而room的成员变量也可以变为private而不是public，更加安全**



- **2、用接口来实现聚合**

给Room类实现的新方法，把方向的细节彻底隐藏在Room类的内部了

今后方向如何实现就和外部无关了



- **3、用容器来实现灵活性**
  - 1、Room的方向使用成员变量表示的，增加活减少方向就要改变代码
  - 2、通过用Hash表来表示方向，则方向就不是“硬编码"了





- **4、以 框架+数据 来提高可扩展性**

  - 1、判断命令的解析是否可以脱离 if-else
    - 用if-else来判断输入，然后进行相应操作，这是**硬编码**的方式，不容易扩展
    - 解决：使用HashMap，直接将相应的命令和操作对应起来，这样增加命令就不用修改大量代码，只需要新增动作子类，并完成HashMap操作就行
  - 2、定义一个Handler来处理命令
  - 3、用**Hash表**来保存命令和Handler之间的关系

  **Q：**HashMap中存放的key : value必须是对象，而从上面的表述我们得知，我们想要将一些关键字对应到执行某个具体的动作函数上去，而函数不是对象，那么如何实现使该动作存放到HashMap中呢？

  **A：**将每个动作函数，定义为一个类（的对象）

  但是，这样一来岂不是会有很多类？再进一步：为这些动作创建一个**父类**，具体的动作作为其**子类**





**可扩展性**

​		可扩展性的意思就是代码的某些部分不需要经过修改就能适应将来可能的变化。



**框架+数据**

​		从程序中识别出**框架和数据**，以代码实现框架，将部分功能以数据的方式加载，这样能在很大程度上实现可扩展性。



### [子类&父类 构造函数调用顺序](https://www.runoob.com/w3cnote/the-different-this-super.html)



